import{j as e,c as f,a as j,u as N}from"./index-GsJMJi6y.js";import{u as y,r as m}from"./react-CcRDz-_R.js";import{q as b,r as S}from"./index-BhZx81v5.js";function k(){const d=y(),[a,p]=m.useState({email:"",password:"",username:""}),[c,t]=m.useState(""),[l,g]=m.useState(!1),i=o=>{const{name:n,value:u}=o.target;p({...a,[n]:u})},h=async o=>{if(o.preventDefault(),t(""),!a.username||!a.email||!a.password){t("Please fill in all fields.");return}if(a.password.length<6){t("Password must be at least 6 characters long.");return}const n=JSON.parse(localStorage.getItem("users"))||[],u=n.some(s=>s.email===a.email),x=n.some(s=>s.username===a.username);if(u){t("This email is already registered.");return}if(x){t("This username is already taken.");return}try{const s=await f(j,a.email,a.password);await N(s.user,{displayName:a.username});const r={email:a.email,username:a.username},w=[...n,r];localStorage.setItem("users",JSON.stringify(w)),localStorage.setItem("username",a.username),console.log("Signup successful! Redirecting to login page..."),d("/login")}catch(s){console.error("Signup error:",s);let r="Failed to create account. Please try again.";switch(s.code){case"auth/email-already-in-use":r="This email is already registered.";break;case"auth/invalid-email":r="Please enter a valid email address.";break;case"auth/weak-password":r="Password must be at least 6 characters long.";break;default:r=s.message||"An unexpected error occurred."}t(r)}};return e.jsx("div",{className:"signup-page",children:e.jsxs("div",{className:"signup-container",children:[e.jsx("h2",{className:"signup-title",children:"Create an Account"}),c&&e.jsx("p",{className:"signup-error",children:c}),e.jsxs("form",{onSubmit:h,className:"signup-form",children:[e.jsxs("div",{className:"input-group",children:[e.jsx("label",{htmlFor:"username",className:"input-label",children:"Username"}),e.jsx("input",{type:"text",id:"username",name:"username",placeholder:"Enter your username",value:a.username,onChange:i,required:!0,className:"input-field"})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("label",{htmlFor:"email",className:"input-label",children:"Email"}),e.jsx("input",{type:"email",id:"email",name:"email",placeholder:"Enter your email",value:a.email,onChange:i,required:!0,className:"input-field"})]}),e.jsxs("div",{className:"input-group",children:[e.jsx("label",{htmlFor:"password",className:"input-label",children:"Password"}),e.jsx("input",{type:l?"text":"password",id:"password",name:"password",placeholder:"Enter your password",value:a.password,onChange:i,required:!0,minLength:6,className:"input-field"}),e.jsx("button",{type:"button",onClick:()=>g(!l),className:"password-toggle",children:l?e.jsx(b,{size:20}):e.jsx(S,{size:20})})]}),e.jsx("button",{type:"submit",className:"signup-button",children:"Sign Up"})]}),e.jsxs("p",{className:"login-link",children:["Already have an account?"," ",e.jsx("a",{href:"/login",className:"login-link-text",children:"Log in here"})]})]})})}export{k as SignupPage};
